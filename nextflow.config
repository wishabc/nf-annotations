profiles {
    // Existing Altius profile
    Altius {
        process {
            executor = "slurm"
            queue = "queue0,encode4,pool,bigmem"
            memory = { (10.GB * task.attempt * task.attempt) }
            cache = "lenient" // may need to switch to deep
            errorStrategy = { (task.exitStatus in 137..143) ? 'retry' : 'ignore' }
            maxRetries = 4
            withLabel: med_mem {
                memory = { 20.GB * task.attempt }
            }
            withLabel: high_mem {
                memory = { 100.GB * task.attempt }
            }
        }
        
        conda.enabled = true
        
        executor {
            $slurm {
                queueSize = 400
            }
        }
    }
    
    // New old_cluster profile
    old_cluster {
        process {
            queue = "queue0,encode4,pool,bigmem"
            withLabel: ldsc {
                queue = "queue0,encode4,pool,bigmem"
            }
        }
    }
    
    // New new_cluster profile
    new_cluster {
        process {
            queue = "hpcz-test,bigmem"
            withLabel: ldsc {
                queue = "hpcz-test,bigmem"
            }
        }
    }
}
